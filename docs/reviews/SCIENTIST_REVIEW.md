# 科学方法论审查报告：易经公式 V4

**审查日期**：2026-01-20
**审查对象**：`/scripts/formula_v4_test.py`
**声称准确率**：100% (30/30)
**审查立场**：怀疑主义、实证主义

---

## 执行摘要

**结论：该公式的100%准确率声称在科学上不成立。**

这是一个典型的过拟合案例，存在严重的方法论缺陷。该公式本质上是对训练数据的记忆，而非对底层规律的发现。

---

## 1. 假设的可检验性与可证伪性

### 1.1 核心假设

该公式隐含以下假设：
> "易经爻辞的吉凶可以通过卦号、爻位、阴阳、得位、得中五个结构变量，加上文本关键词分析来100%准确预测。"

### 1.2 可证伪性评估

**问题1：循环论证**

公式中的关键参数是专门针对特定样本设计的：

```python
# 针对特定卦的特定爻位设置的参数
HEXAGRAM_VIRTUE_ALIGNMENT = {
    17: {4: 1},   # 专门为隨卦四爻设置
    20: {5: -2},  # 专门为觀卦五爻设置
    ...
}
```

这不是"发现规律"，而是"记住答案"。

**问题2：事后解释**

V4的"改进"是在看到V3失败案例后专门添加的规则：
- "何咎"模式 → 针对隨卦17-4
- "无咎独立判断" → 针对觀卦20-5
- "条件句识别" → 同上

这违反了科学方法的基本原则：假设应该在数据收集前提出。

### 1.3 结论

**该假设形式上可证伪，但实际实验设计使其无法被证伪。** 任何失败案例都可以通过添加新规则来"修复"。

---

## 2. 样本量与参数量分析

### 2.1 参数清点

让我们计算公式中的自由参数：

| 参数类别 | 数量 | 说明 |
|----------|------|------|
| TIME_TYPES | 64 | 64卦的时义分类 |
| POSITION_BASE | 6 | 6个爻位基础分 |
| POSITION_RISK | 6 | 6个爻位风险系数 |
| UPPER_LINE_COMPLETION | 6 | 上爻完成结构 |
| UPPER_LINE_EXCESS | 14 | 上爻过度结构 |
| FOURTH_LINE_REMEDIAL | 14 | 四爻补救性 |
| FOURTH_LINE_DANGEROUS | 4 | 四爻危险性 |
| HEXAGRAM_VIRTUE_ALIGNMENT | ~50+ | 卦德契合度（嵌套字典） |
| 文本分析关键词 | ~20 | 吉、凶、无咎等 |
| 阈值参数 | 3 | 1.5, -0.5, 0.3 |

**保守估计：至少 150+ 个可调参数**

### 2.2 样本-参数比

```
样本量 (n) = 30
参数量 (p) ≈ 150+
比值 (n/p) ≈ 0.2
```

**统计学标准**：
- 经验法则要求 n/p >= 10~20
- 本案例 n/p = 0.2，**比推荐值低50-100倍**

### 2.3 自由度分析

```
总自由度 = 30 (样本)
消耗自由度 ≈ 150 (参数)
剩余自由度 = 负数！
```

**结论：这是一个严重过参数化的模型。** 用150+个参数拟合30个数据点，100%准确率是数学上的必然，而非科学发现。

---

## 3. 训练/测试集分割

### 3.1 当前状态

**没有任何数据分割。所有30个样本都用于：**
1. 设计公式结构
2. 调整参数值
3. 评估准确率

这是最严重的方法论错误之一。

### 3.2 正确做法

```
总数据 (384爻) 应分为：
├── 训练集 (70%): ~270爻 - 用于开发公式
├── 验证集 (15%): ~58爻 - 用于调参
└── 测试集 (15%): ~58爻 - 只用于最终评估，开发过程中绝不查看
```

### 3.3 结论

**该研究的"准确率"实际上是训练误差(training error)，而非泛化误差(generalization error)。** 两者不可混淆。

---

## 4. 零假设与基线准确率

### 4.1 零假设

**H0**: 爻辞吉凶是随机分布的，无法通过结构变量预测。

**H1**: 存在可预测的规律。

### 4.2 随机猜测基线

三分类问题（吉/中/凶）的随机基线：
```
随机准确率 = 1/3 ≈ 33.3%
```

但如果知道类别分布不均衡，可以提高：

假设真实分布为 P(吉)=0.3, P(中)=0.4, P(凶)=0.3

**策略1**：总是猜最多的类别（中）
```
准确率 = 40%
```

**策略2**：按分布猜测
```
准确率 = 0.3² + 0.4² + 0.3² = 0.34 = 34%
```

### 4.3 统计显著性

即使100%准确率是真实的，30个样本也不足以得出统计显著结论：

```
二项检验：
n = 30
k = 30 (全部正确)
p0 = 0.33 (零假设下的准确率)

P(X >= 30 | p=0.33) ≈ 1.5 × 10^-14

看似显著，但...
```

**但这忽略了关键问题**：参数是根据这30个样本调整的！

正确的零假设应该是：
> "一个有150+参数的模型无法100%拟合30个数据点"

这个零假设本身就不成立——任何有足够参数的模型都能完美拟合少量数据。

---

## 5. 100%准确率的解读

### 5.1 在30个样本上100%意味着什么？

**数学事实**：
- 30个样本有30个自由度
- 150+个参数可以拟合30³ = 27,000种不同配置
- 100%准确率是参数数量的结果，不是模型质量的证明

### 5.2 类比

这就像：
- 用30个方程解150个未知数：解空间无限大
- 用30个数据点拟合30次多项式：完美通过每一点，但无预测价值
- 用学生的考试答案来设计考题评分标准：100%"正确"

### 5.3 真正令人印象深刻的是什么？

如果：
1. 在270个训练样本上开发公式
2. 在从未见过的58个测试样本上达到80%以上
3. 参数量控制在20个以内

那将是有意义的发现。

---

## 6. 正确的实验设计

### 6.1 数据准备

```
1. 收集全部384爻的爻辞数据
2. 由3位独立专家标注吉/中/凶（计算标注一致性）
3. 随机分割：训练70% / 验证15% / 测试15%
4. 测试集密封，直到最终评估
```

### 6.2 模型开发

```
1. 只用训练集开发公式
2. 用验证集调整参数（不超过20个）
3. 记录每次修改的准确率变化
4. 使用交叉验证减少过拟合
```

### 6.3 评估标准

```
1. 在测试集上评估
2. 报告置信区间（不只是点估计）
3. 与多个基线比较：
   - 随机猜测
   - 只看文本关键词
   - 只看爻位
4. 计算效应量（Cohen's d）
```

### 6.4 可重复性

```
1. 公开所有数据和代码
2. 请独立研究者复现
3. 在不同标注者的数据上验证
```

---

## 7. 混杂变量分析

### 7.1 文本泄露

```python
# 文本分析直接包含吉凶关键词
if "吉" in text:
    score += 3
if "凶" in text:
    score -= 4
```

**问题**：爻辞本身包含"吉"、"凶"等词。用这些词预测吉凶结果是同义反复。

### 7.2 标注偏差

谁定义了"实际结果"？
- 如果是公式开发者：确认偏误
- 如果是传统解释：循环引用
- 如果是独立专家：需要一致性检验

### 7.3 选择性报告

为什么只测试30个样本？
- 是随机选择的吗？
- 还是选择了容易预测的案例？
- 剩余354爻的准确率是多少？

---

## 8. 外推可行性

### 8.1 对未见数据的预测能力

**无法评估**，因为：
1. 没有独立测试集
2. 所有样本都参与了参数调整
3. 参数是针对特定样本设计的

### 8.2 跨域泛化

即使公式有效，也只在以下条件下成立：
- 周易原文爻辞
- 传统吉凶标注
- 中文文本

对于：
- 不同版本的易经解释
- 其他占卜系统
- 不同文化背景

没有任何证据支持泛化。

---

## 9. 总结评价

| 评估维度 | 评分 | 说明 |
|----------|------|------|
| 可证伪性 | 1/5 | 可添加无限规则逃避证伪 |
| 样本充分性 | 1/5 | 严重不足 |
| 数据分割 | 0/5 | 完全没有 |
| 统计严谨性 | 1/5 | 缺乏基线比较和显著性检验 |
| 可重复性 | 2/5 | 代码公开但方法有缺陷 |
| **总体** | **1/5** | 不符合科学标准 |

---

## 10. 建议

### 对作者的建议

1. **承认局限性**：100%准确率是过拟合的结果，不是发现
2. **扩大样本**：测试全部384爻
3. **预注册研究**：在收集数据前确定假设和方法
4. **独立验证**：请非开发者评估

### 对读者的建议

1. **不要相信100%准确率的声明**
2. **警惕参数多于样本的模型**
3. **要求独立测试集结果**

---

## 附录：什么是有意义的发现？

如果研究显示：

> "在384爻中，使用5个结构变量（爻位、阴阳、得位、得中、时义分类）的简单线性模型，在独立测试集上达到65%准确率（基线33%），p < 0.001"

这将是有价值的科学发现，因为：
1. 参数少，不太可能过拟合
2. 有独立测试集
3. 显著优于随机基线
4. 可以被证伪

---

**审查结论**：

该公式声称的100%准确率是统计幻觉，是过拟合的必然结果而非科学发现。在科学方法论上存在根本性缺陷，包括：无数据分割、参数过多、循环论证、缺乏基线比较等。

建议在符合科学标准的条件下重新设计实验，再对外发布任何准确率声明。

---

*审查人：匿名科学方法论审查员*
*日期：2026-01-20*
